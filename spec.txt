CircChannel [CChanDecl "store" (ZVar ("NAT",[])),CChanDecl "add" (ZVar ("NAT",[])),CChanDecl "out" (ZVar ("NAT",[]))]
CircChannel [CChan "result",CChan "reset"]
Process (CProcess "Register" (ProcDef (ProcMain (ZSchemaDef (ZSPlain "RegSt") (ZSchema [Choose ("value",[]) (ZVar ("NAT",[]))])) [CParAction "RegCycle" (CircusAction (CSPExtChoice (CSPExtChoice (CSPExtChoice (CSPCommAction (ChanComm "store" [ChanInp "newValue"]) (CActionCommand (CAssign ["value"] [ZVar ("newValue",[])]))) (CSPCommAction (ChanComm "add" [ChanInp "newValue"]) (CActionCommand (CAssign ["value"] [ZCall (ZVar ("+",[])) (ZTuple [ZVar ("value",[]),ZVar ("newValue",[])])])))) (CSPCommAction (ChanComm "result" []) (CSPCommAction (ChanComm "out" [ChanOutExp (ZVar ("value",[]))]) CSPSkip))) (CSPCommAction (ChanComm "reset" []) (CActionCommand (CAssign ["value"] [ZInt 0])))))] (CActionCommand (CAssign ["value"] [ZInt 0])))))
CircChannel [CChanDecl "read" (ZVar ("Z",[])),CChanDecl "write" (ZVar ("Z",[]))]
Process (CProcess "SumClient" (ProcDef (ProcStalessMain [CParAction "ReadValue" (CircusAction (CSPCommAction (ChanComm "read" [ChanInp "n"]) (CSPCommAction (ChanComm "reset" []) (CSPParAction "Sum" [ZVar ("n",[])])))),CParAction "Pick" (CircusAction (CSPHide (CSPNSParal (NSExprSngl "NSa") (CSExpr "CS") (NSExprSngl "NSb") (CActionName "Action1") (CActionName "Action2")) (CSExpr "AA"))),ProcZPara (ZPredicate (ZPSchema (ZSRef (ZSPlain "\\") [] []))),CParAction "Pick1" (CircusAction (CSPInterParal (NSExprSngl "NSa") (NSExprSngl "NSb") (CActionName "Action1") (CActionName "Action2"))),ProcZPara (ZPredicate (ZPSchema (ZSRef (ZSPlain "\\") [] []))),CParAction "Sum" (ParamActionDecl [Choose ("n",[]) (ZVar ("NAT",[]))] (CircusAction (CSPExtChoice (CSPGuard (ZEqual (ZVar ("n",[])) (ZInt 0)) (CSPCommAction (ChanComm "result" []) (CSPCommAction (ChanComm "out" [ChanInp "r"]) (CSPCommAction (ChanComm "write" [ChanOutExp (ZVar ("r",[]))]) CSPSkip)))) (CSPGuard (ZNot (ZEqual (ZVar ("n",[])) (ZInt 0))) (CSPCommAction (ChanComm "add" [ChanOutExp (ZVar ("n",[]))]) (CSPParAction "Sum" [ZVar ("n",[])]))))))] CSPSkip)))
Process (CProcess "Summation" (ProcDef (CHide (CParParal (CSExpr "CS") (CircusProc "Action1") (CircusProc "Action2")) (CSExpr "AA"))))
CircChanSet "RegAlphabet" (CChanSet ["store","add","out","result","reset"])
